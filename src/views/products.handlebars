<section id="section-mongodb" class="product-mongodb">
    {{!-- <div class="header-mongodb">
        <div>
            {{#if productossFull.[26] }}
            <a href="/api/session/logout" class="btn btn-primary" id="log">LOGOUT</a>
            <a style="font-weight: 700;" href="/api/users" class="btn btn-danger"> Modificar/eliminar usuarios </a>
            {{else}}
            <a href="/api/session/logout" class="btn btn-primary" id="log">LOGOUT</a>
            <a href="completed/purchase" class="btn btn-warning bc">Ir al historial de compras</a>
            <a href="/api/users/premium" class="btn btn-danger bc">Cambiar rol de usuario</a>
            <a href="api/users/documents" class="btn btn-info bc">Cambiar foto de perfil</a>
            {{/if}}
        </div>
        <div style="display: flex">
            <div style="display: flex; align-items:center">
                <p class="texto-perfil"> Usuario: {{productossFull.[7]}} </p>
            </div>
            {{#if productossFull.[25] }}
            <a href="api/users/documents">
                <img class="cuadro-foto-perfil" src="{{productossFull.[24]}}" alt="Foto de perfil">
            </a>
            {{else}}
            <a href="api/users/documents">
                <img class="cuadro-foto-perfil" src="/img/foto-anonima.jpg" alt="Foto de perfil">
                {{/if}}
            </a>
        </div>
    </div> --}}

    {{> headerPrueba}}

    <div class="sub-header">
        <div class="uid">
            <p class="uid-texto"> UID: {{productossFull.[27]}} </p>
        </div>
        <div class="carrito-compras">
            <a href="/carts/{{productossFull.[13]}}/purchase" class="carrito-compras-a">Ir al carrito de compras ðŸ›’ </a>
        </div>

        {{#if productossFull.[28]}}
        <div class="carrito-compras">
            <a class="carrito-compras-a-users" href="/api/users"> Modificar usuarios </a>
        </div>
        {{/if}}

        <div class="photo">
            {{#if productossFull.[25] }}
            <a class="photo-a" href="/api/users/documents">
                <span class="photo-texto"> {{productossFull.[7]}} </span>
                <img class="photo-profile" src="{{productossFull.[24]}}" alt="Foto de perfil">
            </a>
            {{else}}
            <a class="photo-a" href="/api/users/documents">
                <span class="photo-texto"> {{productossFull.[7]}} </span>
                <img class="photo-profile" src="/img/foto-anonima.jpg" alt="Foto de perfil">
            </a>
            {{/if}}
        </div>
    </div>

    {{!-- {{#if productossFull.[9] }}
    <div class="datos-session-mongoDB">
        <h2 style="text-align: center; font-weigth: bolder; font-size: 3.5rem; margin-top: 1%">Bienvenido/a usuario de
            MongoDB Atlas:
            {{productossFull.[7]}} </h2>
        <h3 style="text-align: center; font-weigth: bolder; font-size: 2.8rem; margin-top: 1%; color: blue">
            Tu rol es de: {{productossFull.[16]}} </h3>
        <h4 data-otro-valor="{{productossFull.[13]}}" style="text-align: center; font-size: 2rem; font-weight: 600"> El
            _ID de tu carrito es:
            {{productossFull.[13]}} </h4>
        <h4 style="text-align: center; font-size: 2rem; font-weight: 600; color:red">
            {{productossFull.[23]}}
        </h4>
        <div class="div-boton-cart">
            <a href="/carts/{{productossFull.[13]}}/purchase" style="font-size: 1.6rem; font-weight: bolder"
                class="btn btn-success bc">Ir al carrito de compras ðŸ›’ </a>
        </div>
    </div>
    {{else}}
    <div class="datos-session-github">
        <h2 style="text-align: center; font-weigth: bolder; font-size: 3.5rem; margin-top: 1%">Bienvenido/a usuario de
            Github: {{productossFull.[12]}} </h2>
        <h2 style="text-align: center; font-weigth: bolder; font-size: 3.5rem; margin-top: 1%">Tu email es:
            {{productossFull.[10]}} </h2>
        <h3 style="text-align: center; font-weigth: bolder; font-size: 2.8rem; margin-top: 1%; color: blue">
            Y tu edad es: {{productossFull.[11]}} </h3>
    </div>
    {{/if}} --}}

    {{!-- {{#if productossFull.[9] }}
    <div class="datos-session-mongoDB">
        <h2 class="titlee">Bienvenido/a: {{productossFull.[7]}} </h2>
        <h3 class="title-rol">
            Tu rol es de: {{productossFull.[16]}} </h3>
        <h4 data-otro-valor="{{productossFull.[13]}}" class="title-cart"> _ID de tu carrito:
            {{productossFull.[13]}} </h4>
        <h4 class="title-ultimaConexion">
            {{productossFull.[23]}}
        </h4>
        <div class="div-boton-cart">
            <a href="/carts/{{productossFull.[13]}}/purchase" class="btn btn-success bc">Ir al carrito de compras ðŸ›’
            </a>
        </div>
    </div>
    {{else}}
    <div class="datos-session-github">
        <h2 class="titlee text-center">Bienvenido/a usuario de
            Github: {{productossFull.[12]}} </h2>
        <h2 class="text-center">Tu email es:
            {{productossFull.[10]}} </h2>
        <h3 class="text-center">
            Y tu edad es: {{productossFull.[11]}} </h3>
    </div>
    {{/if}} --}}

    <h1 style="margin: 0; padding: 0" class="mb-4 titlee">CatÃ¡logo de productos</h1>

    <div class="container">
        <div class="row">

            <h5 class="text-center"
                style="font-size: 1.2rem; font-weight: 700; font-family: 'Great Vibes', cursive;color: red">
                *** Recordatorio: los productos que agregues solo VOS y el ADMIN podran eliminarlos,
                y tampoco podras agregarlos al carrito. ***</h5>

            <div class="dropdown">
                <button class="btn btn-info dropdown-toggle" type="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    Filtros
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="/home-mongodb?sort=title"> Orden alfabetico </a></li>
                    <li><a class="dropdown-item" href="/home-mongodb?sort=price"> Menor precio </a></li>
                    <li><a class="dropdown-item" href="/home-mongodb?sort=-price"> Mayor precio </a></li>
                </ul>
            </div>

            <div class="col-12">
                <table style="margin-top: 3.5%;" class="table table-striped col-12">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Title</th>
                            <th scope="col">Description</th>
                            <th scope="col">Code</th>
                            <th scope="col">Price</th>
                            <th scope="col">Stock</th>
                            <th scope="col">Category</th>
                            <th scope="col">Owner</th>
                            {{#if productossFull.[15]}}
                            <th>Agregar al carrito</th>
                            {{/if}}

                            <th> Eliminar producto </th>

                        </tr>
                    </thead>
                    {{#if productossFull.[15]}}
                    <tbody>
                        {{#each productossFull.[0]}}
                        <tr>
                            <th scope="row">{{this}}</th>
                            <td>{{lookup ../productossFull.[1] @index}}</td>
                            <td>{{lookup ../productossFull.[2] @index}}</td>
                            <td>{{lookup ../productossFull.[3] @index}}</td>
                            <td>{{lookup ../productossFull.[4] @index}}</td>
                            <td>{{lookup ../productossFull.[5] @index}}</td>
                            <td>{{lookup ../productossFull.[6] @index}}</td>
                            <td>{{lookup ../productossFull.[19] @index}}</td>
                            <td>
                                <button class="btn btn-info" id="boton-add" onclick="funcionAddToCart('{{lookup ../productossFull.[0] @index}}', 
                                    '{{lookup ../productossFull.[14] @index}}',
                                    '{{lookup ../productossFull.[22] @index}}',
                                    '{{lookup ../productossFull.[19] @index}}'
                                    )">Add to cart</button>
                            </td>
                            <td>
                                <button class="btn btn-danger" id="button-delete" onclick="deleteProductById('{{lookup ../productossFull.[19] @index}}', 
                                    '{{lookup ../productossFull.[0] @index}}',
                                    '{{lookup ../productossFull.[22] @index}}'
                                    )">
                                    Delete Product</button>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                    {{else}}
                    <tbody>
                        {{#each productossFull.[0]}}
                        <tr>
                            <th scope="row">{{this}}</th>
                            <td>{{lookup ../productossFull.[1] @index}}</td>
                            <td>{{lookup ../productossFull.[2] @index}}</td>
                            <td>{{lookup ../productossFull.[3] @index}}</td>
                            <td>{{lookup ../productossFull.[4] @index}}</td>
                            <td>{{lookup ../productossFull.[5] @index}}</td>
                            <td>{{lookup ../productossFull.[6] @index}}</td>
                        </tr>
                        {{/each}}
                        {{/if}}
                    </tbody>
                </table>
            </div>

            <div class="col-12" style="display: flex; justify-content: space-between; margin-bottom: 1.8%">
                {{#if datosExtras.[5]}}
                <a href="/home-mongoDB?sort={{sort}}&page={{datosExtras.[7]}}" class="btn btn-danger">PÃ¡gina
                    anterior</a>
                {{/if}}
                {{#unless datosExtras.[5]}}
                <button disabled class="btn btn-danger">PÃ¡gina anterior</button>
                {{/unless}}

                <div class="numeros-paginacion">
                    <span style="color: red;"> {{datosExtras.[3]}} <span
                            style="color: gray; font-weight: 600; font-size: 1.2rem">de</span> </span>
                    <span> {{datosExtras.[2]}} </span>
                </div>

                {{#if datosExtras.[6]}}
                <a href="/home-mongoDB?sort={{sort}}&page={{datosExtras.[8]}}" class="btn btn-danger">PÃ¡gina
                    siguiente</a>
                {{/if}}
                {{#unless datosExtras.[6]}}
                <button disabled class="btn btn-danger">PÃ¡gina siguiente</button>
                {{/unless}}

            </div>

            {{!-- <div class="contenedor-datos-extras-paginate col-12">
                <h3>Datos extras de Paginate de Mongoose</h3>
                <p> totalDocs: {{datosExtras.[0]}} </p>
                <p> limit: {{datosExtras.[1]}} </p>
                <p> totalPages: {{datosExtras.[2]}} </p>
                <p> page: {{datosExtras.[3]}} </p>
                <p> pagingCounter: {{datosExtras.[4]}} </p>
                <p> hasPrevPage: {{datosExtras.[5]}} </p>
                <p> hasNextPage: {{datosExtras.[6]}} </p>
                <p> prevPage: {{datosExtras.[7]}} </p>
                <p> nextPage: {{datosExtras.[8]}} </p>
            </div> --}}

            {{#if datosExtras.[9]}}
            <div class="col-12">
                <hr class="col-12">
                <h2 class="col-12 text-center mt-4 mb-5 ">Formulario para agregar nuevos productos.
                    <span style="color:red; "><br> Tu rol es de: {{productossFull.[16]}}
                    </span>
                </h2>

                <div class="col-12" style="display: flex; justify-content: space-evenly">

                    <div style="width: 50%">
                        <b class="text-center mb-2" style="font-size: 1.6rem">Todos los campos son obligatorios.</b>

                        {{!-- <form action="/home-mongodb" method="POST">
                            <label for="title">title:</label>
                            <input type="text" name="title" required>
                            <br>
                            <label for="description">description: </label>
                            <input type="text" name="description" required>
                            <br>
                            <label for="code">code:</label>
                            <input type="text" name="code" required>
                            <br>
                            <label for="price">price:</label>
                            <input type="number" name="price" required>
                            <br>
                            <label for="stock">stock:</label>
                            <input type="number" name="stock" required>
                            <br>
                            <label for="category">category:</label>
                            <input type="text" name="category" required>
                            <br>
                            <label for="category">owner:</label>
                            <input type="text" name="owner" value="{{productossFull.[20]}}" readonly>
                            <br>
                            <button type="submit" class="btn btn-primary">Agregar</button>
                        </form> --}}
                        <form action="/home-mongodb" method="POST">
                            <div class="form-group">
                                {{!-- <label for="title">Agregue un producto:</label> --}}
                                <input placeholder="Agregue un tÃ­tulo..." class="form-control" type="text" name="title"
                                    required>
                            </div>
                            <div class="form-group">
                                {{!-- <label for="description">Agregue una descripcion: </label> --}}
                                <input placeholder="Agregue una descripciÃ³n..." class="form-control" type="text"
                                    name="description" required>
                            </div>
                            <div class="form-group">
                                {{!-- <label for="code">Agregue un codigo:</label> --}}
                                <input placeholder="Agregue un cÃ³digo..." class="form-control" type="text" name="code"
                                    required>
                            </div>
                            <div class="form-group">
                                {{!-- <label for="price">Agregue un precio:</label> --}}
                                <input placeholder="Agregue un precio..." class="form-control" type="number"
                                    name="price" required>
                            </div>
                            <div class="form-group">
                                {{!-- <label for="stock">Agregue un stock:</label> --}}
                                <input placeholder="Agregue un stock..." class="form-control" type="number" name="stock"
                                    required>
                            </div>
                            <div class="form-group">
                                {{!-- <label for="category">Agregue una categoria:</label> --}}
                                <input placeholder="Agregue una categorÃ­a..." class="form-control" type="text"
                                    name="category" required>
                            </div>
                            <div class="form-group">
                                <label for="category">Owner:</label>
                                <input class="form-control" type="text" name="owner" value="{{productossFull.[20]}}"
                                    readonly>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary">Agregar</button>
                            </div>
                        </form>

                    </div>
                </div>

                {{else}}

                <h4 class="title-bloqueo-crud mb-5 mt-5" style="font-size: 1.8rem; "> Â¡Disculpanos! Al tener un rol
                    distinto a "premium" no tenes
                    derecho
                    a agregar o eliminar
                    productos ðŸ›‘ </h4>

                {{/if}}

            </div>
        </div>
</section>

{{> footerPrueba}}

<script src="/socket.io/socket.io.js"></script>
<script src="../Routes/views.router.js"></script>
<script src="/js/index.js"></script>